{"dependencies":[{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":21},"end":{"line":2,"column":63,"index":84}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"]}},{"name":"./query.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":85},"end":{"line":3,"column":35,"index":120}}],"key":"wqUrYlRol92tW0ObRFMnxaalj2Y=","exportNames":["*"]}},{"name":"./notifyManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":121},"end":{"line":4,"column":51,"index":172}}],"key":"sE8Jk2BSATSKXEwal1fu77sfV3E=","exportNames":["*"]}},{"name":"./subscribable.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":173},"end":{"line":5,"column":49,"index":222}}],"key":"f0fxTGZggQRtb//cHMvH9AHIWOw=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,\"__esModule\",{value:!0}),e.QueryCache=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),u=r(d[3]),h=class extends u.Subscribable{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(n,u,h){const o=u.queryKey,y=u.queryHash??(0,t.hashQueryKeyByOptions)(o,u);let l=this.get(y);return l||(l=new s.Query({client:n,queryKey:o,queryHash:y,options:n.defaultQueryOptions(u),state:h,defaultOptions:n.getQueryDefaults(o)}),this.add(l)),l}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:\"added\",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:\"removed\",query:t}))}clear(){n.notifyManager.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(s){const n=Object.assign({exact:!0},s);return this.getAll().find(s=>(0,t.matchQuery)(n,s))}findAll(s={}){const n=this.getAll();return Object.keys(s).length>0?n.filter(n=>(0,t.matchQuery)(s,n)):n}notify(t){n.notifyManager.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){n.notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){n.notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}};e.QueryCache=h});","lineCount":1,"map":[[1,97,2,0],[1,101,2,0,"_utils"],[1,103,2,0,"r"],[1,105,2,0,"d"],[1,107,2,0],[1,111,3,0,"_query"],[1,113,3,0,"r"],[1,115,3,0,"d"],[1,117,3,0],[1,121,4,0,"_notifyManager"],[1,123,4,0,"r"],[1,125,4,0,"d"],[1,127,4,0],[1,131,5,0,"_subscribable"],[1,133,5,0,"r"],[1,135,5,0,"d"],[1,137,5,0],[1,141,6,4,"QueryCache"],[1,143,6,17],[1,157,6,31,"Subscribable"],[1,172,7,2,"constructor"],[1,184,7,14,"config"],[1,186,7,23],[1,187,7,24],[1,190,8,4,"super"],[1,198,9,4,"this"],[1,203,9,9,"config"],[1,210,9,18,"config"],[1,212,10,4,"this"],[1,218,10,9,"queries"],[1,220,10,36],[1,224,10,40,"Map"],[1,227,11,2],[1,228,12,2,"queries"],[1,231,13,2,"build"],[1,237,13,8,"client"],[1,239,13,16,"options"],[1,241,13,25,"state"],[1,244,14,4],[1,250,14,10,"queryKey"],[1,252,14,21,"options"],[1,254,14,29,"queryKey"],[1,263,15,10,"queryHash"],[1,265,15,22,"options"],[1,267,15,30,"queryHash"],[1,279,15,43],[1,281,15,43,"hashQueryKeyByOptions"],[1,306,15,65,"queryKey"],[1,308,15,75,"options"],[1,311,16,4],[1,315,16,8,"query"],[1,317,16,16,"this"],[1,322,16,21,"get"],[1,326,16,25,"queryHash"],[1,329,28,4],[1,336,17,9,"query"],[1,340,18,6,"query"],[1,342,18,14],[1,346,18,18,"Query"],[1,354,18,24],[1,355,19,8,"client"],[1,364,20,8,"queryKey"],[1,375,21,8,"queryHash"],[1,387,22,8,"options"],[1,395,22,17,"client"],[1,397,22,24,"defaultQueryOptions"],[1,417,22,44,"options"],[1,420,23,8,"state"],[1,428,24,8,"defaultOptions"],[1,443,24,24,"client"],[1,445,24,31,"getQueryDefaults"],[1,462,24,48,"queryKey"],[1,467,26,6,"this"],[1,472,26,11,"add"],[1,476,26,15,"query"],[1,480,28,11,"query"],[1,481,29,2],[1,482,30,2,"add"],[1,486,30,6,"query"],[1,489,31,9,"this"],[1,495,31,14,"queries"],[1,497,31,23,"has"],[1,501,31,27,"query"],[1,503,31,33,"queryHash"],[1,516,32,6,"this"],[1,522,32,11,"queries"],[1,524,32,20,"set"],[1,528,32,24,"query"],[1,530,32,30,"queryHash"],[1,540,32,41,"query"],[1,543,33,6,"this"],[1,548,33,11,"notify"],[1,555,33,18],[1,556,34,8,"type"],[1,561,34,14],[1,569,35,8,"query"],[1,579,38,2],[1,580,39,2,"remove"],[1,587,39,9,"query"],[1,590,40,4],[1,596,40,10,"queryInMap"],[1,598,40,23,"this"],[1,604,40,28,"queries"],[1,606,40,37,"get"],[1,610,40,41,"query"],[1,612,40,47,"queryHash"],[1,623,41,8,"queryInMap"],[1,627,42,6,"query"],[1,629,42,12,"destroy"],[1,639,43,10,"queryInMap"],[1,643,43,25,"query"],[1,646,44,8,"this"],[1,652,44,13,"queries"],[1,654,44,22,"delete"],[1,661,44,29,"query"],[1,663,44,35,"queryHash"],[1,674,46,6,"this"],[1,679,46,11,"notify"],[1,686,46,18],[1,687,46,20,"type"],[1,692,46,26],[1,702,46,37,"query"],[1,712,48,2],[1,713,49,2,"clear"],[1,721,50,4,"notifyManager"],[1,737,50,18,"batch"],[1,743,50,24],[1,748,51,6,"this"],[1,753,51,11,"getAll"],[1,762,51,20,"forEach"],[1,770,51,29,"query"],[1,774,52,8,"this"],[1,779,52,13,"remove"],[1,786,52,20,"query"],[1,792,55,2],[1,793,56,2,"get"],[1,797,56,6,"queryHash"],[1,800,57,4],[1,807,57,11,"this"],[1,813,57,16,"queries"],[1,815,57,25,"get"],[1,819,57,29,"queryHash"],[1,821,58,2],[1,822,59,2,"getAll"],[1,831,60,4],[1,837,60,11],[1,841,60,15,"this"],[1,847,60,20,"queries"],[1,849,60,29,"values"],[1,858,61,2],[1,859,62,2,"find"],[1,864,62,7,"filters"],[1,867,63,4],[1,873,63,10,"defaultedFilters"],[1,875,63,26,"Object"],[1,882,63,26,"assign"],[1,889,63,26],[1,890,63,31,"exact"],[1,897,63,38],[1,900,63,47,"filters"],[1,903,64,4],[1,910,64,11,"this"],[1,915,64,16,"getAll"],[1,924,64,25,"find"],[1,929,65,7,"query"],[1,933,65,17],[1,935,65,17,"matchQuery"],[1,949,65,28,"defaultedFilters"],[1,951,65,46,"query"],[1,954,67,2],[1,955,68,2,"findAll"],[1,963,68,10,"filters"],[1,965,68,20],[1,966,68,21],[1,969,69,4],[1,975,69,10,"queries"],[1,977,69,20,"this"],[1,982,69,25,"getAll"],[1,991,70,4],[1,998,70,11,"Object"],[1,1005,70,18,"keys"],[1,1010,70,23,"filters"],[1,1013,70,32,"length"],[1,1020,70,41],[1,1022,70,45,"queries"],[1,1024,70,53,"filter"],[1,1031,70,61,"query"],[1,1035,70,71],[1,1037,70,71,"matchQuery"],[1,1051,70,82,"filters"],[1,1053,70,91,"query"],[1,1057,70,101,"queries"],[1,1058,71,2],[1,1059,72,2,"notify"],[1,1066,72,9,"event"],[1,1069,73,4,"notifyManager"],[1,1085,73,18,"batch"],[1,1091,73,24],[1,1096,74,6,"this"],[1,1101,74,11,"listeners"],[1,1111,74,21,"forEach"],[1,1119,74,30,"listener"],[1,1123,75,8,"listener"],[1,1125,75,17,"event"],[1,1131,78,2],[1,1132,79,2,"onFocus"],[1,1142,80,4,"notifyManager"],[1,1158,80,18,"batch"],[1,1164,80,24],[1,1169,81,6,"this"],[1,1174,81,11,"getAll"],[1,1183,81,20,"forEach"],[1,1191,81,29,"query"],[1,1195,82,8,"query"],[1,1197,82,14,"onFocus"],[1,1210,85,2],[1,1211,86,2,"onOnline"],[1,1222,87,4,"notifyManager"],[1,1238,87,18,"batch"],[1,1244,87,24],[1,1249,88,6,"this"],[1,1254,88,11,"getAll"],[1,1263,88,20,"forEach"],[1,1271,88,29,"query"],[1,1275,89,8,"query"],[1,1277,89,14,"onOnline"],[1,1291,92,2],[1,1294,93,2,"e"],[1,1296,93,2,"QueryCache"],[1,1308,93,2],[1,1311]],"functionMap":{"names":["<global>","QueryCache","QueryCache#constructor","QueryCache#build","QueryCache#add","QueryCache#remove","QueryCache#clear","notifyManager.batch$argument_0","getAll.forEach$argument_0","QueryCache#get","QueryCache#getAll","QueryCache#find","getAll.find$argument_0","QueryCache#findAll","queries.filter$argument_0","QueryCache#notify","listeners.forEach$argument_0","QueryCache#onFocus","QueryCache#onOnline"],"mappings":"AAA;iBCK;ECC;GDI;EEE;GFgB;EGC;GHQ;EIC;GJS;EKC;wBCC;4BCC;ODE;KDC;GLC;EQC;GRE;ESC;GTE;EUC;MCG,8CD;GVE;EYC;4DCE,qCD;GZC;EcC;wBRC;6BSC;OTE;KQC;GdC;EgBC;wBVC;4BCC;ODE;KUC;GhBC;EiBC;wBXC;4BCC;ODE;KWC;GjBC;CDC"}},"type":"js/module"}]}