{"dependencies":[{"name":"./subscribable.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":23},"end":{"line":2,"column":49,"index":72}}],"key":"f0fxTGZggQRtb//cHMvH9AHIWOw=","exportNames":["*"]}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":73},"end":{"line":3,"column":38,"index":111}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,\"__esModule\",{value:!0}),e.focusManager=e.FocusManager=void 0;var s=r(d[0]),t=r(d[1]),n=class extends s.Subscribable{#e;#s;#t;constructor(){super(),this.#t=s=>{if(!t.isServer&&window.addEventListener){const t=()=>s();return window.addEventListener(\"visibilitychange\",t,!1),()=>{window.removeEventListener(\"visibilitychange\",t)}}}}onSubscribe(){this.#s||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(s){this.#t=s,this.#s?.(),this.#s=s(s=>{\"boolean\"==typeof s?this.setFocused(s):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return\"boolean\"==typeof this.#e?this.#e:\"hidden\"!==globalThis.document?.visibilityState}};e.FocusManager=n;e.focusManager=new n});","lineCount":1,"map":[[1,114,2,0],[1,118,2,0,"_subscribable"],[1,120,2,0,"r"],[1,122,2,0,"d"],[1,124,2,0],[1,128,3,0,"_utils"],[1,130,3,0,"r"],[1,132,3,0,"d"],[1,134,3,0],[1,138,4,4,"FocusManager"],[1,140,4,19],[1,154,4,33,"Subscribable"],[1,169,5,2,"focused"],[1,172,6,2,"cleanup"],[1,175,7,2,"setup"],[1,178,8,2,"constructor"],[1,192,9,4,"super"],[1,200,10,4,"this"],[1,206,10,9,"setup"],[1,208,10,19,"onFocus"],[1,212,11,6],[1,216,11,11,"isServer"],[1,228,11,23,"window"],[1,235,11,30,"addEventListener"],[1,252,11,48],[1,253,12,8],[1,259,12,14,"listener"],[1,261,12,25,"listener"],[1,265,12,31,"onFocus"],[1,269,14,8],[1,276,13,8,"window"],[1,283,13,15,"addEventListener"],[1,300,13,32],[1,319,13,52,"listener"],[1,322,13,62],[1,325,14,15],[1,330,15,10,"window"],[1,337,15,17,"removeEventListener"],[1,357,15,37],[1,376,15,57,"listener"],[1,379,17,6],[1,381,20,2],[1,382,21,2,"onSubscribe"],[1,396,22,9,"this"],[1,402,22,14,"cleanup"],[1,405,23,6,"this"],[1,410,23,11,"setEventListener"],[1,427,23,28,"this"],[1,433,23,33,"setup"],[1,435,25,2],[1,436,26,2,"onUnsubscribe"],[1,452,27,9,"this"],[1,457,27,14,"hasListeners"],[1,474,28,6,"this"],[1,480,28,11,"cleanup"],[1,486,29,6,"this"],[1,492,29,11,"cleanup"],[1,499,29,19,"undefined"],[1,501,31,2],[1,502,32,2,"setEventListener"],[1,519,32,19,"setup"],[1,522,33,4,"this"],[1,528,33,9,"setup"],[1,530,33,18,"setup"],[1,532,34,4,"this"],[1,538,34,9,"cleanup"],[1,544,35,4,"this"],[1,550,35,9,"cleanup"],[1,552,35,20,"setup"],[1,554,35,27,"focused"],[1,558,36,29],[1,576,36,17,"focused"],[1,578,37,8,"this"],[1,583,37,13,"setFocused"],[1,594,37,24,"focused"],[1,597,39,8,"this"],[1,602,39,13,"onFocus"],[1,613,42,2],[1,614,43,2,"setFocused"],[1,625,43,13,"focused"],[1,628,44,20,"this"],[1,634,44,25,"focused"],[1,638,44,38,"focused"],[1,642,46,6,"this"],[1,648,46,11,"focused"],[1,650,46,22,"focused"],[1,652,47,6,"this"],[1,657,47,11,"onFocus"],[1,667,49,2],[1,668,50,2,"onFocus"],[1,678,51,4],[1,684,51,10,"isFocused"],[1,686,51,22,"this"],[1,691,51,27,"isFocused"],[1,703,52,4,"this"],[1,708,52,9,"listeners"],[1,718,52,19,"forEach"],[1,726,52,28,"listener"],[1,730,53,6,"listener"],[1,732,53,15,"isFocused"],[1,736,55,2],[1,737,56,2,"isFocused"],[1,749,57,4],[1,755,57,33],[1,773,57,15,"this"],[1,779,57,20,"focused"],[1,781,58,13,"this"],[1,787,58,18,"focused"],[1,789,60,52],[1,800,60,11,"globalThis"],[1,811,60,22,"document"],[1,821,60,32,"visibilityState"],[1,836,61,2],[1,839,62,2,"e"],[1,841,62,2,"FocusManager"],[1,856,63,16,"e"],[1,858,63,16,"focusManager"],[1,871,63,19],[1,875,63,23,"FocusManager"],[1,876,63,38],[1,879]],"functionMap":{"names":["<global>","FocusManager","FocusManager#constructor","<anonymous>","listener","FocusManager#onSubscribe","FocusManager#onUnsubscribe","FocusManager#setEventListener","setup$argument_0","FocusManager#setFocused","FocusManager#onFocus","listeners.forEach$argument_0","FocusManager#isFocused"],"mappings":"AAA;mBCG;ECI;kBCE;yBCE,eD;KDO;GDC;EIC;GJI;EKC;GLK;EMC;0BCG;KDM;GNC;EQC;GRM;ESC;2BCE;KDE;GTC;EWC;GXK;CDC"}},"type":"js/module"}]}