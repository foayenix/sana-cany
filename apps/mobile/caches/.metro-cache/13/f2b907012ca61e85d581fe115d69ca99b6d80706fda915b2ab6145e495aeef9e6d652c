{"dependencies":[{"name":"./focusManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":18},"end":{"line":2,"column":49,"index":67}}],"key":"MPsbeootU8NXvIenUHGK2O5yd1g=","exportNames":["*"]}},{"name":"./onlineManager.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":68},"end":{"line":3,"column":51,"index":119}}],"key":"Otgh8ikMRnqhzHrPaw7eERXpoTM=","exportNames":["*"]}},{"name":"./thenable.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":120},"end":{"line":4,"column":48,"index":168}}],"key":"kKA5IQ5mf6XoWFagMsmQasyMyhE=","exportNames":["*"]}},{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":169},"end":{"line":5,"column":45,"index":214}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,\"__esModule\",{value:!0}),e.CancelledError=void 0,e.canFetch=l,e.createRetryer=function(f){let h,v=!1,y=0,p=!1;const M=(0,o.pendingThenable)(),E=()=>n.focusManager.isFocused()&&(\"always\"===f.networkMode||t.onlineManager.isOnline())&&f.canRun(),P=()=>l(f.networkMode)&&f.canRun(),w=n=>{p||(p=!0,f.onSuccess?.(n),h?.(),M.resolve(n))},C=n=>{p||(p=!0,f.onError?.(n),h?.(),M.reject(n))},R=()=>new Promise(n=>{h=t=>{(p||E())&&n(t)},f.onPause?.()}).then(()=>{h=void 0,p||f.onContinue?.()}),b=()=>{if(p)return;let n;const t=0===y?f.initialPromise:void 0;try{n=t??f.fn()}catch(t){n=Promise.reject(t)}Promise.resolve(n).then(w).catch(n=>{if(p)return;const t=f.retry??(c.isServer?0:3),o=f.retryDelay??s,l=\"function\"==typeof o?o(y,n):o,u=!0===t||\"number\"==typeof t&&y<t||\"function\"==typeof t&&t(y,n);!v&&u?(y++,f.onFail?.(y,n),(0,c.sleep)(l).then(()=>E()?void 0:R()).then(()=>{v?C(n):b()})):C(n)})};return{promise:M,cancel:n=>{p||(C(new u(n)),f.abort?.())},continue:()=>(h?.(),M),cancelRetry:()=>{v=!0},continueRetry:()=>{v=!1},canStart:P,start:()=>(P()?b():R().then(b),M)}},e.isCancelledError=function(n){return n instanceof u};var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=r(d[3]);function s(n){return Math.min(1e3*2**n,3e4)}function l(n){return\"online\"!==(n??\"online\")||t.onlineManager.isOnline()}var u=class extends Error{constructor(n){super(\"CancelledError\"),this.revert=n?.revert,this.silent=n?.silent}};e.CancelledError=u});","lineCount":1,"map":[[1,130,22,0],[1,139,22,23,"config"],[1,142,23,2],[1,146,26,6,"continueFn"],[1,148,23,6,"isRetryCancelled"],[1,151,23,25],[1,153,24,6,"failureCount"],[1,155,24,21],[1,157,25,6,"isResolved"],[1,160,25,19],[1,162,27,2],[1,168,27,8,"thenable"],[1,171,27,19],[1,173,27,19,"pendingThenable"],[1,194,40,8,"canContinue"],[1,196,40,22,"canContinue"],[1,200,40,28,"focusManager"],[1,215,40,41,"isFocused"],[1,229,40,80],[1,240,40,57,"config"],[1,242,40,64,"networkMode"],[1,255,40,92,"onlineManager"],[1,271,40,106,"isOnline"],[1,284,40,121,"config"],[1,286,40,128,"canRun"],[1,295,41,8,"canStart"],[1,297,41,19,"canStart"],[1,301,41,25,"canFetch"],[1,303,41,34,"config"],[1,305,41,41,"networkMode"],[1,319,41,57,"config"],[1,321,41,64,"canRun"],[1,330,42,8,"resolve"],[1,332,42,19,"value"],[1,336,43,9,"isResolved"],[1,340,44,6,"isResolved"],[1,343,44,19],[1,345,45,6,"config"],[1,347,45,13,"onSuccess"],[1,359,45,25,"value"],[1,362,46,6,"continueFn"],[1,368,47,6,"thenable"],[1,370,47,15,"resolve"],[1,378,47,23,"value"],[1,383,50,8,"reject"],[1,385,50,18,"value"],[1,389,51,9,"isResolved"],[1,393,52,6,"isResolved"],[1,396,52,19],[1,398,53,6,"config"],[1,400,53,13,"onError"],[1,410,53,23,"value"],[1,413,54,6,"continueFn"],[1,419,55,6,"thenable"],[1,421,55,15,"reject"],[1,428,55,22,"value"],[1,433,58,8,"pause"],[1,435,58,16,"pause"],[1,439,59,11],[1,443,59,15,"Promise"],[1,451,59,24,"continueResolve"],[1,455,60,6,"continueFn"],[1,457,60,20,"value"],[1,462,61,12,"isResolved"],[1,465,61,26,"canContinue"],[1,471,62,10,"continueResolve"],[1,473,62,26,"value"],[1,477,65,6,"config"],[1,479,65,13,"onPause"],[1,493,66,7,"then"],[1,498,66,12],[1,503,67,6,"continueFn"],[1,510,67,16,"undefined"],[1,512,68,11,"isResolved"],[1,515,69,8,"config"],[1,517,69,15,"onContinue"],[1,534,73,8,"run"],[1,536,73,14,"run"],[1,541,74,4],[1,544,74,8,"isResolved"],[1,546,75,6],[1,553,77,4],[1,557,77,8,"promiseOrValue"],[1,559,78,4],[1,565,78,10,"initialPromise"],[1,567,78,44],[1,571,78,27,"failureCount"],[1,573,78,48,"config"],[1,575,78,55,"initialPromise"],[1,595,78,69,"undefined"],[1,597,79,4],[1,601,80,6,"promiseOrValue"],[1,603,80,23,"initialPromise"],[1,606,80,41,"config"],[1,608,80,48,"fn"],[1,612,81,4],[1,613,81,6],[1,619,81,13,"error"],[1,622,82,6,"promiseOrValue"],[1,624,82,23,"Promise"],[1,632,82,31,"reject"],[1,639,82,38,"error"],[1,641,83,4],[1,642,84,4,"Promise"],[1,650,84,12,"resolve"],[1,658,84,20,"promiseOrValue"],[1,661,84,36,"then"],[1,666,84,41,"resolve"],[1,669,84,50,"catch"],[1,675,84,57,"error"],[1,679,85,6],[1,682,85,10,"isResolved"],[1,684,86,8],[1,691,88,6],[1,697,88,12,"retry"],[1,699,88,20,"config"],[1,701,88,27,"retry"],[1,709,88,37,"isServer"],[1,720,88,48],[1,722,88,52],[1,725,89,12,"retryDelay"],[1,727,89,25,"config"],[1,729,89,32,"retryDelay"],[1,741,89,46,"defaultRetryDelay"],[1,743,90,12,"delay"],[1,745,90,42],[1,764,90,27,"retryDelay"],[1,766,90,55,"retryDelay"],[1,768,90,66,"failureCount"],[1,770,90,80,"error"],[1,773,90,89,"retryDelay"],[1,775,91,12,"shouldRetry"],[1,778,91,36],[1,782,91,26,"retry"],[1,785,91,61],[1,802,91,51,"retry"],[1,805,91,73,"failureCount"],[1,807,91,88,"retry"],[1,810,91,114],[1,829,91,104,"retry"],[1,832,91,128,"retry"],[1,834,91,134,"failureCount"],[1,836,91,148,"error"],[1,840,92,10,"isRetryCancelled"],[1,843,92,31,"shouldRetry"],[1,846,96,6,"failureCount"],[1,850,97,6,"config"],[1,852,97,13,"onFail"],[1,861,97,22,"failureCount"],[1,863,97,36,"error"],[1,867,98,6],[1,869,98,6,"sleep"],[1,878,98,12,"delay"],[1,881,98,19,"then"],[1,886,98,24],[1,890,99,15,"canContinue"],[1,899,99,28,"undefined"],[1,901,99,40,"pause"],[1,906,100,9,"then"],[1,911,100,14],[1,916,101,12,"isRetryCancelled"],[1,918,102,10,"reject"],[1,920,102,17,"error"],[1,923,104,10,"run"],[1,930,93,8,"reject"],[1,932,93,15,"error"],[1,938,109,2],[1,944,109,9],[1,945,110,4,"promise"],[1,953,110,13,"thenable"],[1,955,111,4,"cancel"],[1,962,28,18,"cancelOptions"],[1,966,29,9,"isResolved"],[1,970,30,6,"reject"],[1,972,30,13],[1,976,30,17,"CancelledError"],[1,978,30,32,"cancelOptions"],[1,982,31,6,"config"],[1,984,31,13,"abort"],[1,996,112,4,"continue"],[1,1005,112,14,"continue"],[1,1010,113,6,"continueFn"],[1,1016,114,13,"thenable"],[1,1019,116,4,"cancelRetry"],[1,1031,34,22,"cancelRetry"],[1,1036,35,4,"isRetryCancelled"],[1,1039,35,23],[1,1042,117,4,"continueRetry"],[1,1056,37,24,"continueRetry"],[1,1061,38,4,"isRetryCancelled"],[1,1064,38,23],[1,1067,118,4,"canStart"],[1,1078,119,4,"start"],[1,1084,119,11,"start"],[1,1089,120,10,"canStart"],[1,1093,121,8,"run"],[1,1097,123,8,"pause"],[1,1101,123,16,"then"],[1,1106,123,21,"run"],[1,1109,125,13,"thenable"],[1,1112,128,0],[1,1114],[1,1133,19,0],[1,1142,19,26,"value"],[1,1145,20,2],[1,1152,20,9,"value"],[1,1165,20,26,"CancelledError"],[1,1166,21,0],[1,1168,2,0],[1,1172,2,0,"_focusManager"],[1,1174,2,0,"r"],[1,1176,2,0,"d"],[1,1178,2,0],[1,1182,3,0,"_onlineManager"],[1,1184,3,0,"r"],[1,1186,3,0,"d"],[1,1188,3,0],[1,1192,4,0,"_thenable"],[1,1194,4,0,"r"],[1,1196,4,0,"d"],[1,1198,4,0],[1,1202,5,0,"_utils"],[1,1204,5,0,"r"],[1,1206,5,0,"d"],[1,1208,5,0],[1,1212,6,0],[1,1221,6,9,"defaultRetryDelay"],[1,1223,6,27,"failureCount"],[1,1226,7,2],[1,1233,7,9,"Math"],[1,1238,7,14,"min"],[1,1242,7,18],[1,1246,7,24],[1,1249,7,29,"failureCount"],[1,1251,7,43],[1,1255,8,0],[1,1256,9,0],[1,1265,9,9,"canFetch"],[1,1267,9,18,"networkMode"],[1,1270,10,2],[1,1276,10,39],[1,1288,10,10,"networkMode"],[1,1291,10,25],[1,1302,10,50,"onlineManager"],[1,1318,10,64,"isOnline"],[1,1328,11,0],[1,1329,12,0],[1,1333,12,4,"CancelledError"],[1,1335,12,21],[1,1349,12,35,"Error"],[1,1355,13,2,"constructor"],[1,1367,13,14,"options"],[1,1370,14,4,"super"],[1,1376,14,10],[1,1394,15,4,"this"],[1,1399,15,9,"revert"],[1,1406,15,18,"options"],[1,1409,15,27,"revert"],[1,1416,16,4,"this"],[1,1421,16,9,"silent"],[1,1428,16,18,"options"],[1,1431,16,27,"silent"],[1,1437,17,2],[1,1440,18,2,"e"],[1,1442,18,2,"CancelledError"],[1,1458,128,1],[1,1461]],"functionMap":{"names":["<global>","defaultRetryDelay","canFetch","CancelledError","CancelledError#constructor","isCancelledError","createRetryer","cancel","cancelRetry","continueRetry","canContinue","canStart","resolve","reject","pause","Promise$argument_0","continueFn","Promise.then$argument_0","run","Promise.resolve.then._catch$argument_0","sleep.then$argument_0","sleep.then.then$argument_0","_continue","start"],"mappings":"AAA;ACK;CDE;AEC;CFE;qBGC;ECC;GDI;CHC;AKC;CLE;AMC;iBCM;GDK;sBEC;GFE;wBGC;GHE;sBIC,kHJ;mBKC,qDL;kBMC;GNO;iBOC;GPO;gBQC;uBCC;mBCC;ODI;KDE,OG;KHK;GRC;cYC;wDCW;wBCc;ODE,OE;OFM;KDC;GZC;cgBI;KhBG;WiBI;KjBO;CNE"}},"type":"js/module"}]}